{
    "name": "Checking Compliance ",
	"desc": "Checks the offered clause is compliant with the required clause.",
	"vars": [
      {"name": "", "id": "c1", "type": "select", "pre": " Offered Clause ", "post": " ", "src": "{aal.clauses}"},
      {"name": "", "id": "c2", "type": "select", "pre": " Required Clause ", "post": "", "src": "{aal.clauses}"},
      {"name": "", "id": "detection", "type": "checkbox", "pre": " Detection ", "post": ""}
    ],
	"aal": [
      "{{({detection}.checked)?'compliance':'wvalidate_usage_neg'}};[\"{c1}.val\", \"{c2}.val\"]"
    ],
	"html": [
      "<div class='varGroupe'>  <h4 class='varsHeader'>Clauses :</h4>  {c1} {c2} {detection}</div> ",
      "</br><div style='text-align: center;'> ",
      "<button ",
      "onclick='",
      "var editor = ace.edit(visualEditor.ui.activeTab.container.elementContent.id);",
      "var file = visualEditor.ui.activeTab.container.title;",
      "visualEditor.ui.fileManager.saveFile(file, editor.getValue(), function(){",
        "var file = visualEditor.ui.activeTab.container.title;",
        "var code = visualEditor.ui.Template.genAAL(visualEditor.ui.Template.current).split(\";\");",
        "var macro_name = code[0];",
        "var macro_args = code[1];",

            "$.ajax({",
              "dataType: \"text\",",
              "type: \"POST\",",
              "url: visualEditor.backend,",
              "data: {action: \"macroCallAPI\", file: file, macro: macro_name, args:macro_args},",
              "success: function(response){",
                "$(\"#output_window\").empty().append(response).scrollTop(0);",
                "$(\".aceLine\").click(function(e) {",
                    "var editor = ace.edit(visualEditor.ui.activeTab.container.elementContent.id);",
                    "if (editor != undefined && editor != null)",
                        "editor.gotoLine(parseInt(e.target.innerHTML.replace(\"at line \", \"\")));",
                "});",
                "// Add inline result\n",
                "if($(\"#output_window h3\").length != 0) {",
                  "if($(\"#output_window h3\").html().indexOf(\"not\") == -1) {",
                    "$(\"#result\").empty().append(\"<h3 style=\\\"color:green;\\\">\" + $(\"#output_window h3\").html() + \"</h3>\" );",
                  "}else {",
                    "$(\"#result\").empty().append(\"<h3 style=\\\"color:red;\\\">\" + $(\"#output_window h3\").html() + \"</h3>\" );",
                  "}",
                "} else {",
                  "$(\"#result\").empty().append($(\"#output_window\").html());",
                "}",
              "}",
            "});",
        "});",
      "'",
      "style='height: 25px;' class='fa fa-magic'>Check</button></div>",
      "<div id='result'></div>"
    ],
	"xacml": ""
}
