{
    "name": "Checking Satisfiability ",
	"desc": "Checks if a privacy policy is satisfiable.",
	"vars": [
      {"name": "", "id": "c1", "type": "select", "pre": " Policy ", "post": " ", "src": "{aal.clauses}"},
      {"name": "", "id": "detection", "type": "checkbox", "pre": " Use detection ", "post": ""},
      {"name": "", "id": "depth", "type": "select", "pre": " ", "post": "", "src": "[\"Faster\", \"Fast\", \"Slow\", \"MAX\"]"}
    ],
	"aal": [
      "{{({detection}.checked)?'conflict':'wsat_ue2'}};[\"{c1}.val\"",
      "{{({detection}.checked && \"{depth}.val\" == 'Faster')?', \"10\"':''}}",
      "{{({detection}.checked && \"{depth}.val\" == 'Fast')  ?', \"27\"':''}}",
      "{{({detection}.checked && \"{depth}.val\" == 'Slow')  ?', \"40\"':''}}",
      "{{({detection}.checked && \"{depth}.val\" == 'Max')   ?', \"-1\"':''}}",
      "{{({detection}.checked && \"{depth}.val\" == '')      ?', \"-1\"':''}}",
      "]"
    ],
	"html": [
      "<div class='varGroupe'>  <h4 class='varsHeader'>Clauses :</h4> {c1} </div> ",
      "<div class='varGroupe'>  <h4 class='varsHeader'>Detection :</h4> {detection} {depth} </div> ",
      "</br><div style='text-align: center;'> ",
      "<button ",
      "onclick='",
      "var editor = ace.edit(visualEditor.ui.activeTab.container.elementContent.id);",
      "var file = visualEditor.ui.activeTab.container.title;",
      "visualEditor.ui.fileManager.saveFile(file, editor.getValue(), function(){",
        "var file = visualEditor.ui.activeTab.container.title;",
        "var code = visualEditor.ui.Template.genAAL(visualEditor.ui.Template.current).split(\";\");",
        "var macro_name = code[0];",
        "var macro_args = code[1];",
            "$.ajax({",
              "dataType: \"text\",",
              "type: \"POST\",",
              "url: visualEditor.backend,",
              "data: {action: \"macroCallAPI\", file: file, macro: macro_name, args:macro_args},",
              "success: function(response){",
                "toastr.clear( $(\".toast-error\"));",
                "$(\"#output_window\").empty().append(response).scrollTop(0);",
                "$(\".aceLine\").click(function(e) {",
                    "var editor = ace.edit(visualEditor.ui.activeTab.container.elementContent.id);",
                    "if (editor != undefined && editor != null)",
                        "editor.gotoLine(parseInt(e.target.innerHTML.replace(\"at line \", \"\")));",
                "});",
                "// Add inline result\n",
                "if($(\"#output_window h3\").length != 0) {",
                  "if($(\"#output_window h3\").html().indexOf(\"not\") == -1) {",
                    "$(\"#result\").empty().append(\"<h3 style=\\\"color:green;\\\">\" + $(\"#output_window h3\").html() + \"</h3>\" );",
                  "}else {",
                    "$(\"#result\").empty().append(\"<h3 style=\\\"color:red;\\\">\" + $(\"#output_window h3\").html() + \"</h3>\" );",
                  "}",
                "} else {",
                  "$(\"#result\").empty().append($(\"#output_window\").html());",
                "}",
              "}",
            "});",

          "toastr.error(\"<i class=\\\"fa fa-cog fa-spin\\\"></i>\", \"Checking...\", {",
              "\"closeButton\": true,",
              "\"preventDuplicates\": false,",
              "\"tapToDismiss\": false,",
              "\"showDuration\": \"2000\",",
              "\"hideDuration\": \"1000\",",
              "\"timeOut\": 0,",
              "\"extendedTimeOut\": 0,",
              "\"positionClass\": \"toast-bottom-left\",",
              "\"onHidden\": function() {",
                  "$.ajax({",
                      "dataType: \"text\",",
                      "type: \"POST\",",
                      "url: visualEditor.backend,",
                      "data: {action: \"cancelCurrentPS\"},",
                      "success: function (response) {",
                          "$(\"#output_window\").empty().append(response).scrollTop(0);",
                           "$(\"#result\").empty().append($(\"#output_window\").html());",
                      "}",
                  "});",
              "}",
          "});",
        "});",
      "'",
      "style='height: 25px;' class='fa fa-magic'>Check</button></div>",
      "<div id='result'></div>"
    ],
	"xacml": ""
}
